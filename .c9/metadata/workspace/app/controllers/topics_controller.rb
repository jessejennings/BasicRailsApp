{"changed":true,"filter":false,"title":"topics_controller.rb","tooltip":"/app/controllers/topics_controller.rb","ace":{},"value":"\nclass TopicsController < ApplicationController\n  def index\n     @topics = Topic.all\n     authorize @topics\n  end\n\n  def new\n     @topic = Topic.new\n     authorize @topic\n  end\n\n  def show\n     @topic = Topic.find(params[:id])\n    @posts = @topic.posts\n     authorize @topic\n  end\n\n  def edit\n     @topic = Topic.find(params[:id])\n     authorize @topic\n  end\n \n   def create\n     @topic = Topic.new(topic_params)\n    \n     authorize @topic\n     if @topic.save\n       redirect_to @topic, notice: \"Topic was saved successfully.\"\n     else\n       flash[:error] = \"Error creating topic. Please try again.\"\n       render :new\n     end\n   end\n \n   def update\n    @topic = Topic.find(params[:id])\n    @topic = current_user.topic.build(topic_params)\n    authorize @topic\n     if @topic.update_attributes(topic_params)\n       redirect_to @topic\n     else\n       flash[:error] = \"Error saving topic. Please try again.\"\n       render :edit\n     end\n   end\n\n   private\n\n  def topic_params\n    params.require(:topic).permit(:name, :description, :public)\n  end\nend\n","undoManager":{"mark":0,"position":-1,"stack":[]},"timestamp":1423873880000}